{
  "options": {
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": [
          "n8nExecutionId",
          "workflowId",
          "n8nWorkflowId",
          "status",
          "mode",
          "startedAt",
          "createdAt"
        ],
        "properties": {
          "n8nExecutionId": {
            "bsonType": "string",
            "description": "n8n execution ID must be a string"
          },
          "workflowId": {
            "bsonType": "string",
            "description": "Workflow MongoDB ID must be a string"
          },
          "n8nWorkflowId": {
            "bsonType": "string",
            "description": "n8n workflow ID must be a string"
          },
          "status": {
            "enum": ["pending", "running", "success", "failed", "waiting", "canceled"],
            "description": "Status must be one of the enum values"
          },
          "mode": {
            "enum": ["manual", "trigger", "webhook", "retry", "cli"],
            "description": "Mode must be one of the enum values"
          },
          "startedAt": { "bsonType": "date", "description": "Start time must be a date" },
          "finishedAt": { "bsonType": ["date", "null"], "description": "Optional finish time" },
          "executionTime": {
            "bsonType": ["number", "null"],
            "minimum": { "$numberInt": "0" },
            "description": "Execution time in milliseconds"
          },
          "retryCount": {
            "bsonType": ["number", "null"],
            "minimum": { "$numberInt": "0" },
            "description": "Retry count must be non-negative"
          },
          "retryOf": {
            "bsonType": ["string", "null"],
            "description": "Optional retry of execution ID"
          },
          "createdAt": { "bsonType": "date", "description": "Creation timestamp" }
        }
      }
    },
    "validationLevel": "moderate",
    "validationAction": "error"
  },
  "indexes": [
    { "v": { "$numberInt": "2" }, "key": { "_id": { "$numberInt": "1" } }, "name": "_id_" },
    {
      "v": { "$numberInt": "2" },
      "key": { "n8nExecutionId": { "$numberInt": "1" } },
      "name": "idx_n8n_execution_id",
      "unique": true
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "workflowId": { "$numberInt": "1" }, "startedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_workflow"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "n8nWorkflowId": { "$numberInt": "1" }, "startedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_n8n_workflow"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "status": { "$numberInt": "1" }, "startedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_status"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "mode": { "$numberInt": "1" }, "startedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_mode"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "startedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_started"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "finishedAt": { "$numberInt": "-1" } },
      "name": "idx_execution_finished",
      "sparse": true
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "executionTime": { "$numberInt": "-1" } },
      "name": "idx_execution_time",
      "sparse": true
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "retryOf": { "$numberInt": "1" } },
      "name": "idx_execution_retry",
      "sparse": true
    },
    {
      "v": { "$numberInt": "2" },
      "key": {
        "workflowId": { "$numberInt": "1" },
        "status": { "$numberInt": "1" },
        "startedAt": { "$numberInt": "-1" }
      },
      "name": "idx_execution_workflow_status"
    },
    {
      "v": { "$numberInt": "2" },
      "key": { "createdAt": { "$numberInt": "1" } },
      "name": "idx_execution_ttl",
      "partialFilterExpression": { "status": "success" },
      "expireAfterSeconds": { "$numberInt": "2592000" }
    }
  ],
  "uuid": "a8dfa66cc5f2440280b5d17204ed94d4",
  "collectionName": "executions",
  "type": "collection"
}
