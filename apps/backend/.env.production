# ==================================================
# Backend Environment Variables - PRODUCTION
# ==================================================
# IMPORTANT: Update values before deployment
# ==================================================

# ==================================================
# Node Environment
# ==================================================
NODE_ENV=production
HOST=0.0.0.0
PORT=3000

# ==================================================
# MongoDB Configuration
# ==================================================
# Docker 내부 네트워크에서는 서비스명 사용
MONGODB_URI=mongodb://gonsai2:gonsai2_prod_password@mongodb-prod:27017/gonsai2_prod?authSource=admin

# Connection Pool Settings
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# ==================================================
# JWT Configuration
# ==================================================
# IMPORTANT: 운영환경에서는 새로운 시크릿 키 생성 필요
# 생성 명령: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_TO_SECURE_SECRET_KEY_IN_PRODUCTION

# Token expiration
JWT_EXPIRES_IN=7d

# ==================================================
# n8n Integration
# ==================================================
# host.docker.internal은 컨테이너에서 호스트 머신 접근
N8N_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjNGZjZGQ0ZS04M2FhLTRmNTAtODc5Mi1hODU2ZWNhM2YxMGUiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzYyOTI0MjYwfQ.hyAirUwqDFUmQMGDxiFsONMJpFZxl8dve0Y1xrkkkrc
N8N_BASE_URL=http://host.docker.internal:5678

# ==================================================
# WebSocket Configuration
# ==================================================
WS_PORT=3001
WS_PATH=/ws

# ==================================================
# CORS Configuration
# ==================================================
# 운영 도메인으로 변경 필요
CORS_ORIGINS=http://localhost,http://192.168.0.50,http://krdn.iptime.org

# ==================================================
# Rate Limiting
# ==================================================
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=100

# Auth endpoints
RATE_LIMIT_AUTH_WINDOW=15
RATE_LIMIT_AUTH_MAX=5

# ==================================================
# File Upload Configuration
# ==================================================
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads

# ==================================================
# Logging Configuration
# ==================================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# ==================================================
# Security Configuration
# ==================================================
# IMPORTANT: 운영환경에서는 새로운 시크릿 키 생성 필요
SESSION_SECRET=CHANGE_ME_TO_SECURE_SESSION_SECRET_IN_PRODUCTION
TRUST_PROXY=true

# ==================================================
# Feature Flags
# ==================================================
ENABLE_SWAGGER_UI=false
ENABLE_METRICS=true
ENABLE_DEBUG_LOGGING=false

# ==================================================
# Email Configuration (SMTP)
# ==================================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@gonsai2.com

# Frontend URL for password reset links (포트 8081)
FRONTEND_URL=http://localhost:8081
